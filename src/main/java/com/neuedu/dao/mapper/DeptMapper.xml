<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.neuedu.dao.mapper.DeptMapper">
	<!-- 一对多的关键词collection ofType而不是javaType -->
	<select id="getDeptById" parameterType="int" resultMap="deptMap">
		select a.deptno,a.dname,a.loc,b.empno,b.ename,b.sal,b.comm,b.hiredate,b.mgr,b.job
		from dept a,emp b
		WHERE a.deptno=b.deptno
		and b.deptno=#{deptno}
	</select>
	<resultMap type="dept" id="deptMap">
		<id property="deptno" column="deptno"/>
		<result property="dname" column="dname"/>
		<result property="loc" column="loc"/>
		<!-- 开始写一对多关联映射 -->
		<collection property="emps" ofType="Emp">
			<id property="empno" column="empno"/>
			<result property="ename" column="ename"/>
			<result property="job" column="job"/>
			<result property="mgr" column="mgr"/>
			<result property="hiredate" column="hiredate"/>
			<result property="sal" column="sal"/>
			<result property="comm" column="comm"/>
		</collection>
	</resultMap>
	
	<!-- //通用map方式 -->
	
	<select id="getDeptByIdMap" parameterType="int" resultType="map">
		select a.deptno,a.dname,a.loc,b.empno,b.ename,b.sal,b.comm,b.hiredate,b.mgr,b.job
		from dept a,emp b
		WHERE a.deptno=b.deptno
		and b.deptno=#{deptno}
	</select>
	<select id="selectCartList" parameterType="int" resultType="map">
		<!-- select a.businessId,a.cartId,a.foodId,a.quantity,a.userId,c.foodName,c.foodPrice,b.businessName-->
		select a.businessId,a.cartId,a.foodId,a.quantity,a.userId,c.foodName,c.foodImg,c.foodPrice,b.businessName
		 from t_cart a,t_business b,t_food c 
		WHERE a.businessId=b.businessId 
		and a.foodId=c.foodId 
		and a.userId=#{userId} 
		and a.businessId=#{businessId}
	</select>
</mapper>
